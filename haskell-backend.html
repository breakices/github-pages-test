

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Haskell backend &mdash; MultiCategory 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Python backend (under development and not released or published or submitted)" href="python-backend.html" />
    <link rel="prev" title="Java Middleware" href="java-middleware.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> MultiCategory
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_sets.html">Data sets</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="reference.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="javascript-frontend.html">Javascript frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="java-middleware.html">Java Middleware</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Haskell backend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#packages-and-data-stuctures">Packages and data stuctures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema-and-instance-categories">Schema and instance categories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query-processing-example">Query processing example</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python-backend.html">Python backend (under development and not released or published or submitted)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="theoretical_background.html">Theoretical background</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Lisence</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MultiCategory</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="reference.html">Reference</a> &raquo;</li>
        
      <li>Haskell backend</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/haskell-backend.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="haskell-backend">
<h1>Haskell backend<a class="headerlink" href="#haskell-backend" title="Permalink to this headline">¶</a></h1>
<p>The Haskell backend is an independent part of the system and the user can use it from the console. You can start the program by navigating its folder <code class="docutils literal notranslate"><span class="pre">MultiCategory</span></code> and running the command <code class="docutils literal notranslate"><span class="pre">stack</span> <span class="pre">ghci</span></code> which starts the  (read evaluate print loop).</p>
<div class="section" id="packages-and-data-stuctures">
<h2>Packages and data stuctures<a class="headerlink" href="#packages-and-data-stuctures" title="Permalink to this headline">¶</a></h2>
<p>The backend uses the following packages to store different models. Some of the data structures are fairly simple and included in the base.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://hackage.haskell.org/package/base-4.14.0.0/docs/Data-List.html">Data.List</a></p></li>
<li><p><a class="reference external" href="http://hackage.haskell.org/package/containers-0.6.2.1/docs/Data-IntMap-Strict.html">Data.IntMap.Strict</a></p></li>
<li><p><a class="reference external" href="https://hackage.haskell.org/package/unordered-containers-0.2.11.0/docs/Data-HashMap-Strict.html">Data.HashMap.Strict</a></p></li>
<li><p><a class="reference external" href="https://hackage.haskell.org/package/aeson">aeson</a></p></li>
<li><p><a class="reference external" href="https://hackage.haskell.org/package/xeno">xeno</a></p></li>
<li><p><a class="reference external" href="https://hackage.haskell.org/package/algebraic-graphs">algebraic graphs</a></p></li>
<li><p><a class="reference external" href="https://hackage.haskell.org/package/rdf4h">rdf4</a></p></li>
<li><p>NimpleGraph (our own graph data manipulation implementation)</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="schema-and-instance-categories">
<h2>Schema and instance categories<a class="headerlink" href="#schema-and-instance-categories" title="Permalink to this headline">¶</a></h2>
<p>The schema categories are implemented as modules that contain Haskell datatypes. These schema categories can be found from the folder
<a href="#id1"><span class="problematic" id="id2">`src&lt;https://github.com/valterUo/MultiCategory-demo-system/tree/master/MultiCategory/src&gt;`_</span></a> which contains folders named after the data sets.
Each folder contains a file called <cite>SchemaCategory.hs</cite>. Each of these folders contain a file called <cite>InstanceCategory.hs</cite> which contains the objects that are mapped with collection constructor functors from the schema category.
The morphisms are not implemented explicitly since we conceptually consider that all the Haskell functions (except the undefined) to be morphisms.</p>
</div>
<div class="section" id="query-processing-example">
<h2>Query processing example<a class="headerlink" href="#query-processing-example" title="Permalink to this headline">¶</a></h2>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LET</span> <span class="n">t</span> <span class="n">BE</span>
<span class="n">QUERY</span> <span class="p">(</span>\<span class="n">x</span> <span class="o">-&gt;</span> <span class="k">if</span> <span class="n">customerName</span> <span class="n">x</span> <span class="o">==</span> <span class="s2">&quot;Alice&quot;</span> <span class="n">then</span> <span class="n">cons</span> <span class="n">x</span> <span class="k">else</span> <span class="n">nil</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">customers</span>
<span class="n">TO</span> <span class="n">relational</span>
<span class="n">IN</span>
<span class="n">QUERY</span> <span class="p">(</span>\<span class="n">x</span> <span class="o">-&gt;</span> <span class="k">if</span> <span class="nb">any</span> <span class="p">(</span>\<span class="n">y</span> <span class="o">-&gt;</span> <span class="n">knows</span> <span class="n">x</span> <span class="n">y</span> <span class="n">customers</span><span class="p">)</span> <span class="n">t</span> <span class="n">then</span> <span class="n">cons</span> <span class="n">x</span> <span class="k">else</span> <span class="n">nil</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">customers</span>
<span class="n">TO</span> <span class="n">algebraic</span> <span class="n">graph</span>
</pre></div>
</div>
<p>becomes a sequence of folds:</p>
<div class="highlight-haskell notranslate"><div class="highlight"><pre><span></span><span class="kr">let</span> <span class="n">t</span> <span class="ow">=</span>
<span class="nf">foldg</span>  <span class="kt">[]</span> <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="ow">-&gt;</span> <span class="kr">if</span> <span class="n">customerName</span> <span class="n">x</span> <span class="o">==</span> <span class="s">&quot;Alice&quot;</span> <span class="kr">then</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>  <span class="kr">else</span> <span class="kt">[]</span> <span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">union</span> <span class="n">x</span> <span class="n">y</span> <span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">union</span> <span class="n">x</span> <span class="n">y</span> <span class="p">)</span>  <span class="n">customers</span>
<span class="kr">in</span>
<span class="nf">foldg</span>  <span class="kt">Algebra</span><span class="o">.</span><span class="kt">Graph</span><span class="o">.</span><span class="n">empty</span> <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="ow">-&gt;</span> <span class="kr">if</span> <span class="n">any</span> <span class="p">(</span> <span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">knows</span> <span class="n">x</span> <span class="n">y</span> <span class="n">customers</span> <span class="p">)</span> <span class="n">t</span> <span class="kr">then</span> <span class="kt">Vertex</span> <span class="n">x</span> <span class="kr">else</span> <span class="kt">Algebra</span><span class="o">.</span><span class="kt">Graph</span><span class="o">.</span><span class="n">empty</span> <span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">overlay</span> <span class="n">x</span> <span class="n">y</span> <span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">connect</span> <span class="n">x</span> <span class="n">y</span> <span class="p">)</span>  <span class="n">customers</span>
</pre></div>
</div>
<p>The user does not need to know the <code class="docutils literal notranslate"><span class="pre">cons</span></code> and <code class="docutils literal notranslate"><span class="pre">nil</span></code> functions for the colletions. The system can determine them based on the data sets and it knows how to use them in different combinations.
The user is also allowed to input multiple lambda functions. If the user does not provide a lambda function, then the certain initial setting is used.</p>
<p>Unfortunately, the system cannot know how user wants to build richer structures from primitive structures. For example, if the user is querying a table to graph, they need to define explicitly
how data is organized in the output graph. On the otherhand, if the user is querying graph to table, then it suffices to use <code class="docutils literal notranslate"><span class="pre">cons</span></code> and <code class="docutils literal notranslate"><span class="pre">nil</span></code> functions and multiple lambda functions.</p>
<p>The program contains more examples that can be executed.</p>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="python-backend.html" class="btn btn-neutral float-right" title="Python backend (under development and not released or published or submitted)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="java-middleware.html" class="btn btn-neutral float-left" title="Java Middleware" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Valter Uotila

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>